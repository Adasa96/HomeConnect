{% extends 'base.html' %}

{% block title %}{{ provider.company_name|default:provider.user.username }} â€” HomeConnect{% endblock %}

{% block content %}
<div class="container mt-5">

    <!-- CRUD Buttons -->
    <div class="mb-3">
        {% if request.user == provider.user %}
            <a href="{% url 'accounts:provider_update' provider.pk %}" class="btn btn-primary btn-sm">Edit Profile</a>
            <a href="{% url 'accounts:provider_delete' provider.pk %}" class="btn btn-danger btn-sm">Delete Profile</a>
        {% endif %}
        <a href="{% url 'accounts:provider_list' %}" class="btn btn-secondary btn-sm">Back to Providers</a>
    </div>

    <div class="row">
        <div class="col-md-8">
            <h2>{{ provider.company_name|default:provider.user.username }}</h2>

            {% if provider.user.profile_image %}
                <img src="{{ provider.user.profile_image.url }}" alt="{{ provider.user.username }}"
                     class="img-fluid rounded mb-3" width="250">
            {% endif %}

            <p><strong>Bio:</strong> {{ provider.user.bio }}</p>
            <p><strong>Phone:</strong> {{ provider.user.phone }}</p>
            <p><strong>Location:</strong> {{ provider.user.location }}</p>
            <p><strong>City:</strong> {{ provider.user.city }}</p>

            <p><strong>Skills:</strong> {{ provider.skills }}</p>
            <p><strong>Experience:</strong> {{ provider.experience_years }} years</p>

            <p><strong>Services Offered:</strong>
                {% if provider.services.exists %}
                    {% for s in provider.services.all %}
                        <span class="badge bg-secondary">{{ s.name }}</span>
                    {% endfor %}
                {% else %}
                    <em>No services listed</em>
                {% endif %}
            </p>

            {% if provider.portfolio_image %}
                <p><strong>Portfolio:</strong></p>
                <img src="{{ provider.portfolio_image.url }}" class="img-fluid rounded shadow mb-3" width="400">
            {% endif %}
        </div>

    </div>
</div>
{% endblock %}
